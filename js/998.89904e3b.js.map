{"version":3,"file":"js/998.89904e3b.js","mappings":"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","sources":["webpack://your-project/./src/views/PoolDetail.vue","webpack://your-project/./src/views/PoolDetail.vue?b712"],"sourcesContent":["<template>\n  <div class=\"pool-detail\">\n    <!-- 头部导航 -->\n    <div class=\"header\">\n      <router-link\n        to=\"/\"\n        class=\"back-btn\"\n      >\n        &lt; 返回列表\n      </router-link>\n      <h1 class=\"title\">\n        {{ token0Symbol }}/{{ token1Symbol }} 交易池\n      </h1>\n    </div>\n\n    <!-- 池信息 -->\n    <div class=\"pool-info\">\n\n      <div class=\"card\">\n        <h3>账户余额</h3>\n        <div class=\"user-balances\">\n          <p>{{ token0Symbol }} 余额: {{ formatReserve(userBalance0) }}</p>\n          <p>{{ token1Symbol }} 余额: {{ formatReserve(userBalance1) }}</p>\n        </div>\n        <h3>流动性信息</h3>\n        <div class=\"reserves\">\n          <p>{{ token0Symbol }} 储备量: {{ formatReserve(reserve0) }}</p>\n          <p>{{ token1Symbol }} 储备量: {{ formatReserve(reserve1) }}</p>\n        </div>\n        <div class=\"user-liquidity\">\n          <p>您的流动性: {{ formatReserve(userLiquidity) }} LP</p>\n        </div>\n      </div>\n    </div>\n    <!-- 授权提示 -->\n    <div v-if=\"pendingApprovalToken\" class=\"approval-card\">\n      <p>需要先授权 {{ pendingApprovalTokenSymbol }} 代币</p>\n      <button @click=\"handleApproval\" :disabled=\"approvalPending\">\n        {{ approvalPending ? '处理中...' : '立即授权' }}\n      </button>\n    </div>\n    <!-- 兑换功能 -->\n    <div class=\"swap-section card\">\n      <h3>代币兑换（3%手续费，90%滑点保护）</h3>\n      <div class=\"input-group\">\n        <input\n            v-model.number=\"swapInput\"\n            type=\"number\"\n            step=\"any\"\n            :placeholder=\"`输入兑换数量`\"\n            @input=\"handleSwapInput\"\n        >\n        <div class=\"direction-select\">\n          <button\n            :class=\"{ active: swapDirection }\"\n            @click=\"swapDirection = true\"\n          >\n            {{ token0Symbol }} → {{ token1Symbol }}\n          </button>\n          <button\n            :class=\"{ active: !swapDirection }\"\n            @click=\"swapDirection = false\"\n          >\n            {{ token1Symbol }} → {{ token0Symbol }}\n          </button>\n        </div>\n      </div>\n      <div class=\"swap-output\">\n        预计获得: <strong>{{ calculatedOutput }}</strong> {{ outputTokenSymbol }}\n      </div>\n      <button\n        class=\"swap-btn\"\n        :disabled=\"!canSwap || swapPending\"\n        @click=\"executeSwap\"\n      >\n        <span v-if=\"swapPending\">交易处理中...</span>\n        <span v-else>立即兑换</span>\n      </button>\n    </div>\n\n    <!-- 流动性管理 -->\n    <div class=\"liquidity-management\">\n      <div class=\"add-liquidity card\">\n        <h3>添加流动性</h3>\n        <div class=\"ratio-notice\" v-if=\"reserve0 > 0 && reserve1 > 0\">\n          当前比例: 1 {{ token0Symbol }} =\n          {{ (reserve1 / reserve0).toFixed(4) }} {{ token1Symbol }}\n        </div>\n        <div class=\"input-group\">\n          <input\n              v-model=\"addAmount0\"\n              type=\"number\"\n              :placeholder=\"`${token0Symbol} 数量`\"\n              @focus=\"autoCalculate = true\"\n          >\n          <div class=\"auto-calculate-tip\" v-if=\"autoCalculate\">\n            ← 自动计算 →\n          </div>\n          <input\n              v-model=\"addAmount1\"\n              type=\"number\"\n              :placeholder=\"`${token1Symbol} 数量`\"\n              @focus=\"autoCalculate = false\"\n          >\n        </div>\n        <button\n            class=\"add-btn\"\n            :disabled=\"addPending\"\n            @click=\"addLiquidity\"\n        >\n          <span v-if=\"addPending\">处理中...</span>\n          <span v-else>添加流动性</span>\n        </button>\n      </div>\n\n      <div class=\"remove-liquidity card\">\n        <h3>移除流动性</h3>\n        <div class=\"input-group\">\n          <input\n              v-model.number=\"removeLpAmount\"\n              type=\"number\"\n              step=\"any\"\n              placeholder=\"输入要移除的LP数量\"\n              @input=\"handleLpInput\"\n          >\n          <div class=\"liquidity-preview\">\n            预计获得：\n            {{ previewAmount0 }} {{ token0Symbol }} 和\n            {{ previewAmount1 }} {{ token1Symbol }}\n          </div>\n        </div>\n        <button\n            class=\"remove-btn\"\n            :disabled=\"!canRemove || removePending\"\n            @click=\"removeLiquidity\"\n        >\n          <span v-if=\"removePending\">处理中...</span>\n          <span v-else>移除流动性</span>\n        </button>\n      </div>\n    </div>\n\n    <!-- 错误提示 -->\n    <div\n      v-if=\"errorMessage\"\n      class=\"error-card\"\n    >\n      {{ errorMessage }}\n      <button\n        class=\"close-btn\"\n        @click=\"errorMessage = ''\"\n      >\n        ×\n      </button>\n    </div>\n  </div>\n</template>\n\n\n<script setup>\nimport { ref, computed, onMounted, watch } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { getWeb3,initWeb3, getAccount } from '../utils/web3'\nimport { getSimpleSwap, getERC20 } from '../contracts/contracts'\n\nconst route = useRoute()\nconst web3 = getWeb3()\n\n// 池数据\nconst poolId = ref(route.params.poolId)\nconst token0 = ref('')\nconst token1 = ref('')\nconst reserve0 = ref('0')\nconst reserve1 = ref('0')\nconst token0Symbol = ref('')\nconst token1Symbol = ref('')\n\n// 用户相关数据\nconst userLiquidity = ref('0')\nconst userBalance0 = ref('0') // 新增：用户代币0余额\nconst userBalance1 = ref('0') // 新增：用户代币1余额\n\n// 兑换相关\nconst swapDirection = ref(true)\nconst swapInput = ref('')\nconst swapPending = ref(false)\nconst canSwap = computed(() => swapInput.value > 0)\n\n// 授权相关\nconst approvalPending = ref(false)\nconst pendingApprovalToken = ref('')\nconst pendingApprovalTokenSymbol = ref('')\n\n// 流动性管理\nconst addAmount0 = ref('')\nconst addAmount1 = ref('')\nconst addPending = ref(false)\nconst removePending = ref(false)\nconst errorMessage = ref('')\nconst autoCalculate = ref(true) // 新增：自动计算开关\nconst removeLpAmount = ref('')\nconst previewAmount0 = ref(0)\nconst previewAmount1 = ref(0)\n\n\nconst poolTotalSupply = ref('0')  // 池子总流动性\nconst poolFee0 = ref('0')        // 代币0手续费池\nconst poolFee1 = ref('0')        // 代币1手续费池\n\n// 计算可移除状态\nconst canRemove = computed(() => {\n  return removeLpAmount.value > 0 &&\n      Number(removeLpAmount.value) <= Number(userLiquidity.value)\n})\n\n// 处理LP输入\nconst handleLpInput = () => {\n  if (!poolTotalSupply.value || poolTotalSupply.value === 0) return\n\n  // 计算比例（考虑手续费）\n  const ratio = removeLpAmount.value / poolTotalSupply.value\n  previewAmount0.value = formatReserve((reserve0.value + poolFee0.value) * ratio)\n  previewAmount1.value = formatReserve((reserve1.value + poolFee1.value) * ratio)\n}\n// 自动计算方向控制（true表示根据token0计算token1，false表示根据token1计算token0）\nconst autoCalculateDirection = ref(null) // 初始为null，根据首次输入自动判断\n\n// 智能比例计算\nconst calculateRatio = (value, fromToken) => {\n  if (!reserve0.value || !reserve1.value) return 0\n  return fromToken === 0 ?\n      value * (reserve1.value / reserve0.value) :\n      value * (reserve0.value / reserve1.value)\n}\n\n// 代币0输入监听\nwatch(addAmount0, (newVal) => {\n  if (autoCalculateDirection.value !== 1 && newVal !== '') {\n    autoCalculateDirection.value = 0\n    const calculated = calculateRatio(newVal, 0).toFixed(4)\n    addAmount1.value = isNaN(calculated) ? '' : calculated\n  }\n})\n\n// 代币1输入监听\nwatch(addAmount1, (newVal) => {\n  if (autoCalculateDirection.value !== 0 && newVal !== '') {\n    autoCalculateDirection.value = 1\n    const calculated = calculateRatio(newVal, 1).toFixed(4)\n    addAmount0.value = isNaN(calculated) ? '' : calculated\n  }\n})\n\n\n// 输入处理（移除自动补零）\nconst handleSwapInput = (e) => {\n  let value = e.target.value\n  // 允许空值或有效数字\n  if (value === '' || /^[0-9]*\\.?[0-9]*$/.test(value)) {\n    swapInput.value = value\n  }\n}\n\n// 格式化显示（保留4位小数但不去除尾零）\nfunction formatReserve(value) {\n  const num = Number(value)\n  return isNaN(num) ? '0' : num.toLocaleString(undefined, {\n    minimumFractionDigits: 0,\n    maximumFractionDigits: 4\n  })\n}\n\n// 获取用户余额\nasync function loadUserBalances() {\n  try {\n    const account = await getAccount()\n    const [erc0, erc1] = [getERC20(token0.value), getERC20(token1.value)]\n\n    const balances = await Promise.all([\n      erc0.methods.balanceOf(account).call(),\n      erc1.methods.balanceOf(account).call()\n    ])\n\n    userBalance0.value = web3.utils.fromWei(balances[0], 'ether')\n    userBalance1.value = web3.utils.fromWei(balances[1], 'ether')\n  } catch (err) {\n    console.error('余额加载失败:', err)\n  }\n}\n\nasync function loadPoolData() {\n  try {\n    if (!web3) {\n      await initWeb3(false);\n    } // 确保先初始化\n    const contract = getSimpleSwap();\n    const account = await getAccount()\n\n    // 获取完整的池信息（单次调用）\n    const poolInfo = await contract.methods\n        .getPoolInfo(poolId.value)\n        .call()\n\n    // 解构赋值所有需要的数据\n    const {\n      token0: t0,\n      token1: t1,\n      info: {\n        reserve0: reserve0Wei,\n        reserve1: reserve1Wei,\n        fee0: fee0Wei,\n        fee1: fee1Wei,\n        totalSupply: totalSupplyWei\n      }\n    } = poolInfo\n\n    // 设置基础信息\n    token0.value = t0\n    token1.value = t1\n    reserve0.value = web3.utils.fromWei(reserve0Wei, 'ether')\n    reserve1.value = web3.utils.fromWei(reserve1Wei, 'ether')\n\n    // 设置手续费和总供应量\n    poolFee0.value = web3.utils.fromWei(fee0Wei, 'ether')\n    poolFee1.value = web3.utils.fromWei(fee1Wei, 'ether')\n    poolTotalSupply.value = web3.utils.fromWei(totalSupplyWei, 'ether')\n\n    // 获取代币符号\n    const [erc0, erc1] = [getERC20(t0), getERC20(t1)]\n    const [symbol0, symbol1] = await Promise.all([\n      erc0.methods.symbol().call(),\n      erc1.methods.symbol().call()\n    ])\n    token0Symbol.value = symbol0\n    token1Symbol.value = symbol1\n\n    // 获取用户数据\n    const [liquidityWei, balance0Wei, balance1Wei] = await Promise.all([\n      contract.methods.getUserLiquidity(poolId.value, account).call(),\n      erc0.methods.balanceOf(account).call(),\n      erc1.methods.balanceOf(account).call()\n    ])\n\n    // 转换用户数据单位\n    userLiquidity.value = web3.utils.fromWei(liquidityWei, 'ether')\n    userBalance0.value = web3.utils.fromWei(balance0Wei, 'ether')\n    userBalance1.value = web3.utils.fromWei(balance1Wei, 'ether')\n\n  } catch (err) {\n    console.error('池数据加载失败:', err)\n    errorMessage.value = `加载失败: ${err.message}`\n  }\n}\n\n// 通用授权检查\nasync function checkApproval(tokenAddress, amountWei) {\n  const account = await getAccount()\n  const token = getERC20(tokenAddress)\n\n  const allowance = await token.methods.allowance(\n      account,\n      getSimpleSwap().options.address\n  ).call()\n\n  if (BigInt(allowance) < BigInt(amountWei)) {\n    pendingApprovalToken.value = tokenAddress\n    pendingApprovalTokenSymbol.value = tokenAddress === token0.value\n        ? token0Symbol.value\n        : token1Symbol.value\n    return false\n  }\n  return true\n}\n\n// 执行授权\nasync function handleApproval() {\n  try {\n    approvalPending.value = true\n    const token = getERC20(pendingApprovalToken.value)\n    const amount = web3.utils.toTwosComplement(-1) // 无限授权\n\n    await token.methods.approve(\n        getSimpleSwap().options.address,\n        amount\n    ).send({ from: await getAccount() })\n\n    pendingApprovalToken.value = ''\n    await loadUserBalances() // 刷新余额\n  } catch (err) {\n    handleError(err, '授权失败')\n  } finally {\n    approvalPending.value = false\n  }\n}\n\n// 兑换操作\nasync function executeSwap() {\n  try {\n    swapPending.value = true\n    errorMessage.value = ''\n\n    const amountIn = parseFloat(swapInput.value)\n    if (amountIn < 1) throw new Error('最小兑换量为1')\n\n    const amountInWei = web3.utils.toWei(swapInput.value, 'ether')\n    const inputToken = swapDirection.value ? token0.value : token1.value\n\n    // 授权检查\n    if (!await checkApproval(inputToken, amountInWei)) return\n\n    // 执行兑换\n    const contract = getSimpleSwap()\n    const minOutput = calculatedOutput.value * 0.9 // 10%滑点保护\n\n    await contract.methods.swap(\n        poolId.value,\n        amountInWei,\n        web3.utils.toWei(minOutput.toFixed(18), 'ether'),\n        swapDirection.value,\n        await getAccount()\n    ).send({ from: await getAccount() })\n\n    // 刷新数据\n    await Promise.all([loadPoolData(), loadUserBalances()])\n    swapInput.value = ''\n  } catch (err) {\n    handleError(err, '兑换失败')\n  } finally {\n    swapPending.value = false\n  }\n}\n// 添加流动性函数改进\nasync function addLiquidity() {\n  try {\n    addPending.value = true\n    errorMessage.value = ''\n\n\n    const contract = getSimpleSwap()\n    const account = await getAccount()\n    // 新增输入校验\n    console.log(addAmount0.value,userBalance0.value,\"比大小\")\n    if (!addAmount0.value || !addAmount1.value ||\n        Number(addAmount0.value) <= 0 || Number(addAmount1.value) <= 0) {\n      throw new Error('请输入有效的代币数量')\n    }\n    if (addAmount0.value > userBalance0.value) {\n      throw new Error(`${token0Symbol.value} 余额不足`)\n    }\n    if (addAmount1.value > userBalance1.value) {\n      throw new Error(`${token1Symbol.value} 余额不足`)\n    }\n    // 获取当前池比例\n    const currentRatio = reserve1.value / reserve0.value\n    const inputRatio = addAmount1.value / addAmount0.value\n\n    // 比例验证（允许1%偏差）\n    if (Math.abs(inputRatio - currentRatio) > currentRatio * 0.01) {\n      throw new Error(`比例需保持 ${reserve0.value} : ${reserve1.value} (±1%)`)\n    }\n    // 获取代币精度\n    const [erc0, erc1] = [getERC20(token0.value), getERC20(token1.value)]\n    const [decimals0, decimals1] = await Promise.all([\n      erc0.methods.decimals().call(),\n      erc1.methods.decimals().call()\n    ])\n\n\n    // 将用户输入转换为最小单位（考虑代币精度）\n    const amount0Base = BigInt(web3.utils.toWei(addAmount0.value, 'ether'))\n        / BigInt(10 ** (18 - parseInt(decimals0)))\n    const amount1Base = BigInt(web3.utils.toWei(addAmount1.value, 'ether'))\n        / BigInt(10 ** (18 - parseInt(decimals1)))\n    console.log(3)\n\n\n\n    // 授权代币\n    await Promise.all([\n      erc0.methods.approve(contract.options.address, amount0Base.toString())\n          .send({ from: account }),\n      erc1.methods.approve(contract.options.address, amount1Base.toString())\n          .send({ from: account })\n    ])\n\n    await contract.methods.addLiquidity(\n        poolId.value,\n        amount0Base.toString(),\n        amount1Base.toString(),\n        (amount0Base * 95n) / 100n, // 允许5%偏差\n        (amount1Base * 95n) / 100n\n    ).send({ from: account })\n\n    // 清空输入\n    addAmount0.value = ''\n    addAmount1.value = ''\n    await loadPoolData()\n  } catch (err) {\n    handleError(err, '添加流动性失败')\n  } finally {\n    addPending.value = false\n  }\n}\n\n\n// 修复后的兑换计算\nconst calculatedOutput = computed(() => {\n  if (!swapInput.value || swapInput.value <= 0) return '0'\n\n  const inputReserve = swapDirection.value ? reserve0.value : reserve1.value\n  const outputReserve = swapDirection.value ? reserve1.value : reserve0.value\n\n  if (inputReserve <= 0 || outputReserve <= 0) return '0'\n\n  // 正确的手续费计算\n  const amountIn = parseFloat(swapInput.value)\n  const amountInWithFee = amountIn * 997 // 0.3% 手续费\n  const numerator = amountInWithFee * outputReserve\n  const denominator = inputReserve * 1000 + amountInWithFee\n\n  return (numerator / denominator).toFixed(4)\n})\n\n// 补全的移除流动性函数\n// 移除流动性方法\nasync function removeLiquidity() {\n  try {\n    removePending.value = true\n    const contract = getSimpleSwap()\n    const amountWei = web3.utils.toWei(removeLpAmount.value.toString(), 'ether')\n\n    await contract.methods.removeLiquidity(\n        poolId.value,\n        amountWei\n    ).send({ from: await getAccount() })\n\n    // 重置状态\n    removeLpAmount.value = ''\n    previewAmount0.value = 0\n    previewAmount1.value = 0\n\n    // 刷新数据\n    await loadPoolData()\n    await loadUserBalances()\n\n  } catch (err) {\n    handleError(err, '移除失败')\n  } finally {\n    removePending.value = false\n  }\n}\n\n// 错误处理增强\nfunction handleError(error, prefix = '操作失败') {\n  const errorMessages = {\n    'INSUFFICIENT_OUTPUT_AMOUNT': '输出数量不足，请调整滑点',\n    'INSUFFICIENT_LIQUIDITY_BURNED': '流动性不足',\n    'INSUFFICIENT_A_AMOUNT': `${token0Symbol.value} 数量不足`,\n    'INSUFFICIENT_B_AMOUNT': `${token1Symbol.value} 数量不足`,\n    'INITIAL_DEPOSIT_REQUIRED': '必须提供初始流动性'\n  }\n\n  const message = error.message.match(/reverted with reason string '(.*)'/)?.[1]\n      || error.message\n\n  errorMessage.value = `${prefix}: ${errorMessages[message] || message}`\n}\n\nfunction setupEventListeners() {\n  const contract = getSimpleSwap()\n  const handler = () => loadPoolData()\n\n  contract.events.Swapped({ poolId: poolId.value })\n      .on('data', handler)\n  contract.events.LiquidityAdded({ poolId: poolId.value })\n      .on('data', handler)\n  contract.events.LiquidityRemoved({ poolId: poolId.value })\n      .on('data', handler)\n}\n\n// 在 onMounted 中添加事件监听\nonMounted(async () => {\n  const currentAccount = await getAccount();\n  if (currentAccount) {\n    await loadPoolData();\n    setupEventListeners(); // 添加这行\n  }\n});\n\n</script>\n\n<style scoped>\n.pool-detail {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.header {\n  margin-bottom: 2rem;\n  position: relative;\n}\n\n.back-btn {\n  position: absolute;\n  left: 0;\n  top: 50%;\n  transform: translateY(-50%);\n  text-decoration: none;\n  color: #666;\n}\n\n.title {\n  text-align: center;\n  margin: 0;\n}\n\n.card {\n  background: white;\n  padding: 1.5rem;\n  border-radius: 12px;\n  box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n  margin-bottom: 1.5rem;\n}\n\n.input-group {\n  margin: 1rem 0;\n}\n\ninput {\n  width: 100%;\n  padding: 12px;\n  border: 1px solid #ddd;\n  border-radius: 8px;\n  margin: 8px 0;\n}\n\nbutton {\n  padding: 12px 24px;\n  border: none;\n  border-radius: 8px;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\nbutton:disabled {\n  background: #ddd;\n  cursor: not-allowed;\n}\n\n.swap-btn {\n  background: #007bff;\n  color: white;\n  width: 100%;\n}\n\n.add-btn {\n  background: #28a745;\n  color: white;\n}\n\n.remove-btn {\n  background: #dc3545;\n  color: white;\n}\n\n.direction-select button {\n  margin: 0 4px;\n  padding: 8px 16px;\n  background: #f0f0f0;\n}\n\n.direction-select button.active {\n  background: #007bff;\n  color: white;\n}\n\n.error-card {\n  background: #ffe3e3;\n  color: #c00;\n  padding: 1rem;\n  border-radius: 8px;\n  position: fixed;\n  top: 20px;\n  right: 20px;\n  display: flex;\n  align-items: center;\n}\n\n.close-btn {\n  margin-left: 1rem;\n  padding: 4px;\n  background: none;\n  color: #c00;\n}\n/* 用户余额样式 */\n.user-balances {\n  margin: 1rem 0;\n  padding: 0.5rem;\n  background: #f8f9fa;\n  border-radius: 8px;\n}\n\n/* 授权卡片 */\n.approval-card {\n  background: #fff3e0;\n  padding: 1rem;\n  margin: 1rem 0;\n  border-radius: 8px;\n  text-align: center;\n}\n.approval-card button {\n  background: #ff9800;\n  color: white;\n  margin-top: 0.5rem;\n}\n</style>","import script from \"./PoolDetail.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./PoolDetail.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./PoolDetail.vue?vue&type=style&index=0&id=2972c7f7&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-2972c7f7\"]])\n\nexport default __exports__"],"names":["route","useRoute","web3","getWeb3","poolId","ref","params","token0","token1","reserve0","reserve1","token0Symbol","token1Symbol","userLiquidity","userBalance0","userBalance1","swapDirection","swapInput","swapPending","canSwap","computed","value","approvalPending","pendingApprovalToken","pendingApprovalTokenSymbol","addAmount0","addAmount1","addPending","removePending","errorMessage","autoCalculate","removeLpAmount","previewAmount0","previewAmount1","poolTotalSupply","poolFee0","poolFee1","canRemove","Number","handleLpInput","ratio","formatReserve","autoCalculateDirection","calculateRatio","fromToken","watch","newVal","calculated","toFixed","isNaN","handleSwapInput","e","target","test","num","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","loadUserBalances","_loadUserBalances","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","account","_ref2","erc0","erc1","balances","wrap","_context2","prev","next","getAccount","sent","getERC20","Promise","all","methods","balanceOf","call","utils","fromWei","t0","console","error","stop","loadPoolData","_loadPoolData","_callee3","contract","poolInfo","t1","_poolInfo$info","reserve0Wei","reserve1Wei","fee0Wei","fee1Wei","totalSupplyWei","_ref3","_yield$Promise$all","_yield$Promise$all2","symbol0","symbol1","_yield$Promise$all3","_yield$Promise$all4","liquidityWei","balance0Wei","balance1Wei","_context3","initWeb3","getSimpleSwap","getPoolInfo","info","fee0","fee1","totalSupply","symbol","_slicedToArray","getUserLiquidity","concat","message","checkApproval","_x","_x2","_checkApproval","_callee4","tokenAddress","amountWei","token","allowance","_context4","options","address","BigInt","abrupt","handleApproval","_handleApproval","_callee5","amount","_context5","toTwosComplement","approve","t2","from","send","t3","handleError","finish","executeSwap","_executeSwap","_callee6","amountIn","amountInWei","inputToken","minOutput","_context6","parseFloat","Error","toWei","calculatedOutput","t4","t5","t6","swap","t7","t8","t9","addLiquidity","_addLiquidity","_callee7","currentRatio","inputRatio","_ref4","_yield$Promise$all5","_yield$Promise$all6","decimals0","decimals1","amount0Base","amount1Base","_context7","log","Math","abs","decimals","pow","parseInt","toString","inputReserve","outputReserve","amountInWithFee","numerator","denominator","removeLiquidity","_removeLiquidity","_callee8","_context8","_error$message$match","prefix","length","errorMessages","match","setupEventListeners","handler","events","Swapped","on","LiquidityAdded","LiquidityRemoved","onMounted","_callee","currentAccount","_context","__exports__"],"sourceRoot":""}